{% extends 'base.html.twig' %}

{% block body %}


   {% for message in app.flashes('success') %}
      <div class="alert alert-success">{{ message }}</div>
   {% endfor %}

   {% for message in app.flashes('error') %}
      <div class="alert alert-danger">{{ message }}</div>
   {% endfor %}

   {{ form_start(form) }}
      <div class="d-flex justify-content-center mt-4">
         <div class="d-flex gap-2">
            {{ form_widget(form.name, { 'attr': {'placeholder': 'Nowy temat', 'class': 'form-control'} }) }}
            <button class="btn btn-primary">Zapisz</button>
         </div>
      </div>
   {{ form_end(form) }}



   <center><br><h2 class="mt-4">Lista tematów</h2></center>

   <ul class="list-group">
   {% for topic in topics %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
         <div>
         <a class="text-dark fw-bold text-decoration-none" href="{{ path('topic_show', {slug: topic.slug, _locale: app.request.locale}) }}">
            {{ topic.name }}
         </a>
         </div>
         <div>
         <a href="{{ path('topic_edit', {id: topic.id}) }}" class="btn btn-sm btn-outline-primary me-2">Edytuj</a>

         <form method="post" action="{{ path('topic_delete', {id: topic.id, _locale: app.request.locale}) }}" style="display:inline;" 
               onsubmit="return confirm('Na pewno chcesz usunąć ten temat?');">
            <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ topic.id) }}">
            <button class="btn btn-sm btn-outline-danger">Usuń</button>
         </form>
         </div>
      </li>
   {% else %}
      <li class="list-group-item">Brak tematów.</li>
   {% endfor %}
   </ul>

{% endblock %}
